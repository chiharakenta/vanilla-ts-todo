(()=>{"use strict";var t="todoInput",e="todoList",n="todoCompleteList",o=function(){var t=localStorage.getItem("todos");return t?JSON.parse(t):[]},r=function(t,e){for(var n=0;n<t.length;n++)if(t[n].id===e)return n},a=function(t){var e=o();e[r(e,t)].completed=!0,localStorage.setItem("todos",JSON.stringify(e)),c()},d=function(t){var e=o();e[r(e,t)].completed=!1,localStorage.setItem("todos",JSON.stringify(e))},i=function(t){var e=document.createElement("button");return e.textContent="削除",e.id=t,e.onclick=function(){!function(t){var e=o().filter((function(e){return e.id!==t}));localStorage.setItem("todos",JSON.stringify(e))}(parseInt(t)),c()},e},c=function(){var t=document.getElementById(e);t.innerHTML="";var r=document.getElementById(n);r.innerHTML="";var l=o();l.length&&l.forEach((function(e){var n=function(t){var e=document.createElement("li");return e.className="todo",e.draggable=!0,e.ondragstart=function(e){var n,o=t.id,r=t.content,a=t.completed;null===(n=e.dataTransfer)||void 0===n||n.setData("text/plain",JSON.stringify({id:o,content:r,completed:a}))},e}(e),o=function(t){var e=document.createElement("span");return e.textContent=t,e}(e.content);if(!e.completed){var l=function(t){var e=document.createElement("input");return e.type="checkbox",e.id=t,e.className="todo-check-button",e.onclick=function(){a(parseInt(t)),c()},e}(String(e.id));n.appendChild(l),n.appendChild(o);var u=i(String(e.id));n.appendChild(u),t.appendChild(n)}if(e.completed){var p=function(t){var e=document.createElement("input");return e.type="checkbox",e.checked=!0,e.id=t,e.className="todo-check-button",e.onclick=function(){d(parseInt(t)),c()},e}(String(e.id));n.appendChild(p),n.appendChild(o),u=i(String(e.id)),n.appendChild(u),r.appendChild(n)}}))};window.onload=c,document.getElementById("todoForm").onsubmit=function(e){var n;e.preventDefault(),function(){var e=document.getElementById(t).value,n=o();if(n.length){var r={id:Date.now(),content:e,completed:!1};n.push(r),localStorage.setItem("todos",JSON.stringify(n))}else{var a=[{id:Date.now(),content:e,completed:!1}];localStorage.setItem("todos",JSON.stringify(a))}}(),n=t,document.getElementById(n).value="",c()};var l=document.getElementById(e);l.ondragover=function(t){return t.preventDefault()},l.ondragenter=function(t){return t.preventDefault()},l.ondrop=function(t){var e,n=null===(e=t.dataTransfer)||void 0===e?void 0:e.getData("text/plain");if(n){var o=JSON.parse(n);o.completed&&(d(o.id),c())}};var u=document.getElementById(n);u.ondragover=function(t){return t.preventDefault()},u.ondragenter=function(t){return t.preventDefault()},u.ondrop=function(t){var e,n=null===(e=t.dataTransfer)||void 0===e?void 0:e.getData("text/plain");if(n){var o=JSON.parse(n);o.completed||(a(o.id),c())}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQUFBLEVBQU1vQixnQkFBTixFQUNqQ08sRUFBU0UsWUFBYyxTQUFDN0IsR0FBVSxPQUFBQSxFQUFNb0IsZ0JBQU4sRUFDbENPLEVBQVNHLE9BQVMsU0FBQzlCLEcsTUFDWCtCLEVBQWtDLFFBQWxCLEVBQUEvQixFQUFNRSxvQkFBWSxlQUFFOEIsUUFBUSxjQUNsRCxHQUFLRCxFQUFMLENBQ0EsSUFBTTNDLEVBQU9yQixLQUFLQyxNQUFNK0QsR0FDcEIzQyxFQUFLWixZQUNQSSxFQUFTUSxFQUFLbEIsSUFDZFMsSUFKd0IsQ0FNNUIsRUFFQSxJQUFNc0QsRUFBbUJsRCxTQUFTUyxlQUFlOUIsR0FDakR1RSxFQUFpQkwsV0FBYSxTQUFDNUIsR0FBVSxPQUFBQSxFQUFNb0IsZ0JBQU4sRUFDekNhLEVBQWlCSixZQUFjLFNBQUM3QixHQUFVLE9BQUFBLEVBQU1vQixnQkFBTixFQUMxQ2EsRUFBaUJILE9BQVMsU0FBQzlCLEcsTUFDbkIrQixFQUFrQyxRQUFsQixFQUFBL0IsRUFBTUUsb0JBQVksZUFBRThCLFFBQVEsY0FDbEQsR0FBS0QsRUFBTCxDQUNBLElBQU0zQyxFQUFPckIsS0FBS0MsTUFBTStELEdBQ25CM0MsRUFBS1osWUFDUkgsRUFBYWUsRUFBS2xCLElBQ2xCUyxJQUp3QixDQU01QixDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2ltcGxlLXRvZG8vLi9zcmMvY29uc3RhbnQvZWxlbWVudElkLnRzIiwid2VicGFjazovL3NpbXBsZS10b2RvLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3NpbXBsZS10b2RvLy4vc3JjL3V0aWwvY2xlYXJGb3JtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBUT0RPX0ZPUk1fRUxFTUVOVF9JRCA9ICd0b2RvRm9ybSc7XG5leHBvcnQgY29uc3QgVE9ET19JTlBVVF9FTEVNRU5UX0lEID0gJ3RvZG9JbnB1dCc7XG5leHBvcnQgY29uc3QgVE9ET19MSVNUX0VMRU1FTlRfSUQgPSAndG9kb0xpc3QnO1xuZXhwb3J0IGNvbnN0IFRPRE9fQ09NUExFVEVfTElTVF9FTEVNRU5UX0lEID0gJ3RvZG9Db21wbGV0ZUxpc3QnO1xuIiwiaW1wb3J0IHtcbiAgVE9ET19DT01QTEVURV9MSVNUX0VMRU1FTlRfSUQsXG4gIFRPRE9fRk9STV9FTEVNRU5UX0lELFxuICBUT0RPX0lOUFVUX0VMRU1FTlRfSUQsXG4gIFRPRE9fTElTVF9FTEVNRU5UX0lEXG59IGZyb20gJy4vY29uc3RhbnQvZWxlbWVudElkJztcbmltcG9ydCB7IFRvZG8gfSBmcm9tICcuL3R5cGUvVG9kbyc7XG5pbXBvcnQgeyBjbGVhckZvcm0gfSBmcm9tICcuL3V0aWwvY2xlYXJGb3JtJztcblxuY29uc3QgZ2V0VG9kb3M6ICgpID0+IEFycmF5PFRvZG8+ID0gKCkgPT4ge1xuICBjb25zdCB0b2RvcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2RvcycpO1xuICBpZiAoIXRvZG9zKSByZXR1cm4gW107XG4gIHJldHVybiBKU09OLnBhcnNlKHRvZG9zKTtcbn07XG5cbmNvbnN0IGdldFRvZG9JbmRleCA9ICh0b2RvczogQXJyYXk8VG9kbz4sIGlkOiBudW1iZXIpID0+IHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b2Rvcy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh0b2Rvc1tpXS5pZCA9PT0gaWQpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3QgY3JlYXRlVG9kbyA9ICgpID0+IHtcbiAgY29uc3QgdG9kb0lucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFRPRE9fSU5QVVRfRUxFTUVOVF9JRCkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgY29uc3QgdG9kb0NvbnRlbnQgPSB0b2RvSW5wdXRFbGVtZW50LnZhbHVlO1xuXG4gIGNvbnN0IHRvZG9zID0gZ2V0VG9kb3MoKTtcbiAgaWYgKCF0b2Rvcy5sZW5ndGgpIHtcbiAgICBjb25zdCBuZXdUb2RvczogQXJyYXk8VG9kbz4gPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiBEYXRlLm5vdygpLFxuICAgICAgICBjb250ZW50OiB0b2RvQ29udGVudCxcbiAgICAgICAgY29tcGxldGVkOiBmYWxzZVxuICAgICAgfVxuICAgIF07XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG9zJywgSlNPTi5zdHJpbmdpZnkobmV3VG9kb3MpKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgbmV3VG9kbyA9IHtcbiAgICBpZDogRGF0ZS5ub3coKSxcbiAgICBjb250ZW50OiB0b2RvQ29udGVudCxcbiAgICBjb21wbGV0ZWQ6IGZhbHNlXG4gIH07XG4gIHRvZG9zLnB1c2gobmV3VG9kbyk7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvcycsIEpTT04uc3RyaW5naWZ5KHRvZG9zKSk7XG59O1xuXG5jb25zdCBjb21wbGV0ZVRvZG8gPSAodG9kb0lkOiBudW1iZXIpID0+IHtcbiAgY29uc3QgbmV3VG9kb3MgPSBnZXRUb2RvcygpO1xuICBjb25zdCBuZXdUb2RvSW5kZXggPSBnZXRUb2RvSW5kZXgobmV3VG9kb3MsIHRvZG9JZCkhO1xuICBuZXdUb2Rvc1tuZXdUb2RvSW5kZXhdLmNvbXBsZXRlZCA9IHRydWU7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvcycsIEpTT04uc3RyaW5naWZ5KG5ld1RvZG9zKSk7XG4gIHJlbmRlclRvZG9zKCk7XG59O1xuXG5jb25zdCBiYWNrVG9kbyA9ICh0b2RvSWQ6IG51bWJlcikgPT4ge1xuICBjb25zdCBuZXdUb2RvcyA9IGdldFRvZG9zKCk7XG4gIGNvbnN0IG5ld1RvZG9JbmRleCA9IGdldFRvZG9JbmRleChuZXdUb2RvcywgdG9kb0lkKSE7XG4gIG5ld1RvZG9zW25ld1RvZG9JbmRleF0uY29tcGxldGVkID0gZmFsc2U7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvcycsIEpTT04uc3RyaW5naWZ5KG5ld1RvZG9zKSk7XG59O1xuXG5jb25zdCBkZWxldGVUb2RvID0gKHRvZG9JZDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHRvZG9zID0gZ2V0VG9kb3MoKTtcbiAgY29uc3QgbmV3VG9kb3MgPSB0b2Rvcy5maWx0ZXIoKHRvZG8pID0+IHRvZG8uaWQgIT09IHRvZG9JZCk7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvcycsIEpTT04uc3RyaW5naWZ5KG5ld1RvZG9zKSk7XG59O1xuXG5jb25zdCBjcmVhdGVUb2RvRWxlbWVudCA9ICh0b2RvOiBUb2RvKSA9PiB7XG4gIGNvbnN0IHRvZG9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgdG9kb0VsZW1lbnQuY2xhc3NOYW1lID0gJ3RvZG8nO1xuICB0b2RvRWxlbWVudC5kcmFnZ2FibGUgPSB0cnVlO1xuICB0b2RvRWxlbWVudC5vbmRyYWdzdGFydCA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IHsgaWQsIGNvbnRlbnQsIGNvbXBsZXRlZCB9ID0gdG9kbztcbiAgICBldmVudC5kYXRhVHJhbnNmZXI/LnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeSh7IGlkLCBjb250ZW50LCBjb21wbGV0ZWQgfSkpO1xuICB9O1xuICByZXR1cm4gdG9kb0VsZW1lbnQ7XG59O1xuXG5jb25zdCBjcmVhdGVUb2RvQ29udGVudEVsZW1lbnQgPSAodG9kb0NvbnRlbnQ6IHN0cmluZykgPT4ge1xuICBjb25zdCB0b2RvQ29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIHRvZG9Db250ZW50RWxlbWVudC50ZXh0Q29udGVudCA9IHRvZG9Db250ZW50O1xuICAvLyA8c3Bhbj4ke3RvZG9Db250ZW50fTwvc3Bhbj5cbiAgcmV0dXJuIHRvZG9Db250ZW50RWxlbWVudDtcbn07XG5cbmNvbnN0IGNyZWF0ZVRvZG9Db21wbGV0ZUJ1dHRvbkVsZW1lbnQgPSAodG9kb0lkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgdG9kb0NvbXBsZXRlQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIHRvZG9Db21wbGV0ZUJ1dHRvbkVsZW1lbnQudHlwZSA9ICdjaGVja2JveCc7XG4gIHRvZG9Db21wbGV0ZUJ1dHRvbkVsZW1lbnQuaWQgPSB0b2RvSWQ7XG4gIHRvZG9Db21wbGV0ZUJ1dHRvbkVsZW1lbnQuY2xhc3NOYW1lID0gJ3RvZG8tY2hlY2stYnV0dG9uJztcbiAgdG9kb0NvbXBsZXRlQnV0dG9uRWxlbWVudC5vbmNsaWNrID0gKCkgPT4ge1xuICAgIGNvbXBsZXRlVG9kbyhwYXJzZUludCh0b2RvSWQpKTtcbiAgICByZW5kZXJUb2RvcygpO1xuICB9O1xuICAvLyA8YnV0dG9uIGlkPVwiJHt0b2RvLmlkfVwiIGNsYXNzPVwidG9kby1jb21wbGV0ZS1idXR0b25cIj7lrozkuoY8L2J1dHRvbj5cbiAgcmV0dXJuIHRvZG9Db21wbGV0ZUJ1dHRvbkVsZW1lbnQ7XG59O1xuXG5jb25zdCBjcmVhdGVUb2RvQmFja0J1dHRvbkVsZW1lbnQgPSAodG9kb0lkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgdG9kb0NvbXBsZXRlQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIHRvZG9Db21wbGV0ZUJ1dHRvbkVsZW1lbnQudHlwZSA9ICdjaGVja2JveCc7XG4gIHRvZG9Db21wbGV0ZUJ1dHRvbkVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gIHRvZG9Db21wbGV0ZUJ1dHRvbkVsZW1lbnQuaWQgPSB0b2RvSWQ7XG4gIHRvZG9Db21wbGV0ZUJ1dHRvbkVsZW1lbnQuY2xhc3NOYW1lID0gJ3RvZG8tY2hlY2stYnV0dG9uJztcbiAgdG9kb0NvbXBsZXRlQnV0dG9uRWxlbWVudC5vbmNsaWNrID0gKCkgPT4ge1xuICAgIGJhY2tUb2RvKHBhcnNlSW50KHRvZG9JZCkpO1xuICAgIHJlbmRlclRvZG9zKCk7XG4gIH07XG4gIC8vIDxidXR0b24gaWQ9XCIke3RvZG8uaWR9XCI+5oi744GZPC9idXR0b24+XG4gIHJldHVybiB0b2RvQ29tcGxldGVCdXR0b25FbGVtZW50O1xufTtcblxuY29uc3QgY3JlYXRlVG9kb0RlbGV0ZUJ1dHRvbkVsZW1lbnQgPSAodG9kb0lkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgdG9kb0RlbGV0ZUJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgdG9kb0RlbGV0ZUJ1dHRvbkVsZW1lbnQudGV4dENvbnRlbnQgPSAn5YmK6ZmkJztcbiAgdG9kb0RlbGV0ZUJ1dHRvbkVsZW1lbnQuaWQgPSB0b2RvSWQ7XG4gIHRvZG9EZWxldGVCdXR0b25FbGVtZW50Lm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgZGVsZXRlVG9kbyhwYXJzZUludCh0b2RvSWQpKTtcbiAgICByZW5kZXJUb2RvcygpO1xuICB9O1xuICAvLyA8YnV0dG9uIGlkPVwiJHt0b2RvLmlkfVwiPuWJiumZpDwvYnV0dG9uPlxuICByZXR1cm4gdG9kb0RlbGV0ZUJ1dHRvbkVsZW1lbnQ7XG59O1xuXG5jb25zdCByZW5kZXJUb2RvcyA9ICgpID0+IHtcbiAgLy8gdG9kb+ODquOCueODiOWGheOCkuS4gOW6puepuuOBq+OBmeOCi1xuICBjb25zdCB0b2RvTGlzdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChUT0RPX0xJU1RfRUxFTUVOVF9JRCkgYXMgSFRNTFVMaXN0RWxlbWVudDtcbiAgdG9kb0xpc3RFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICBjb25zdCB0b2RvQ29tcGxldGVMaXN0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgIFRPRE9fQ09NUExFVEVfTElTVF9FTEVNRU5UX0lEXG4gICkgYXMgSFRNTFVMaXN0RWxlbWVudDtcbiAgdG9kb0NvbXBsZXRlTGlzdEVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgLy8g5L+d5a2Y44GV44KM44GfdG9kb+OBjDHjgaTjgoLnhKHjgZHjgozjgbDntYLkuoZcbiAgY29uc3QgdG9kb3MgPSBnZXRUb2RvcygpO1xuICBpZiAoIXRvZG9zLmxlbmd0aCkgcmV0dXJuO1xuXG4gIC8vIHRvZG/jgpLjgZnjgbnjgabjg6rjgrnjg4jjgavov73liqBcbiAgdG9kb3MuZm9yRWFjaCgodG9kbykgPT4ge1xuICAgIGNvbnN0IHRvZG9FbGVtZW50ID0gY3JlYXRlVG9kb0VsZW1lbnQodG9kbyk7XG5cbiAgICAvLyA8c3Bhbj4ke3RvZG8uY29udGVudH08L3NwYW4+XG4gICAgY29uc3QgdG9kb0NvbnRlbnRFbGVtZW50ID0gY3JlYXRlVG9kb0NvbnRlbnRFbGVtZW50KHRvZG8uY29udGVudCk7XG5cbiAgICBpZiAoIXRvZG8uY29tcGxldGVkKSB7XG4gICAgICAvLyA8YnV0dG9uIGlkPVwiJHt0b2RvLmlkfVwiIGNsYXNzPVwidG9kby1jb21wbGV0ZS1idXR0b25cIj7lrozkuoY8L2J1dHRvbj5cbiAgICAgIGNvbnN0IHRvZG9Db21wbGV0ZUJ1dHRvbkVsZW1lbnQgPSBjcmVhdGVUb2RvQ29tcGxldGVCdXR0b25FbGVtZW50KFN0cmluZyh0b2RvLmlkKSk7XG4gICAgICB0b2RvRWxlbWVudC5hcHBlbmRDaGlsZCh0b2RvQ29tcGxldGVCdXR0b25FbGVtZW50KTtcbiAgICAgIHRvZG9FbGVtZW50LmFwcGVuZENoaWxkKHRvZG9Db250ZW50RWxlbWVudCk7XG4gICAgICBjb25zdCB0b2RvRGVsZXRlQnV0dG9uRWxlbWVudCA9IGNyZWF0ZVRvZG9EZWxldGVCdXR0b25FbGVtZW50KFN0cmluZyh0b2RvLmlkKSk7XG4gICAgICB0b2RvRWxlbWVudC5hcHBlbmRDaGlsZCh0b2RvRGVsZXRlQnV0dG9uRWxlbWVudCk7XG4gICAgICB0b2RvTGlzdEVsZW1lbnQuYXBwZW5kQ2hpbGQodG9kb0VsZW1lbnQpO1xuICAgIH1cblxuICAgIGlmICh0b2RvLmNvbXBsZXRlZCkge1xuICAgICAgY29uc3QgdG9kb0JhY2tCdXR0b25FbGVtZW50ID0gY3JlYXRlVG9kb0JhY2tCdXR0b25FbGVtZW50KFN0cmluZyh0b2RvLmlkKSk7XG4gICAgICB0b2RvRWxlbWVudC5hcHBlbmRDaGlsZCh0b2RvQmFja0J1dHRvbkVsZW1lbnQpO1xuICAgICAgdG9kb0VsZW1lbnQuYXBwZW5kQ2hpbGQodG9kb0NvbnRlbnRFbGVtZW50KTtcbiAgICAgIGNvbnN0IHRvZG9EZWxldGVCdXR0b25FbGVtZW50ID0gY3JlYXRlVG9kb0RlbGV0ZUJ1dHRvbkVsZW1lbnQoU3RyaW5nKHRvZG8uaWQpKTtcbiAgICAgIHRvZG9FbGVtZW50LmFwcGVuZENoaWxkKHRvZG9EZWxldGVCdXR0b25FbGVtZW50KTtcbiAgICAgIHRvZG9Db21wbGV0ZUxpc3RFbGVtZW50LmFwcGVuZENoaWxkKHRvZG9FbGVtZW50KTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyog44Oh44Kk44Oz5Yem55CGICovXG53aW5kb3cub25sb2FkID0gcmVuZGVyVG9kb3M7XG5cbmNvbnN0IHRvZG9Gb3JtRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFRPRE9fRk9STV9FTEVNRU5UX0lEKSBhcyBIVE1MRm9ybUVsZW1lbnQ7XG50b2RvRm9ybUVsZW1lbnQub25zdWJtaXQgPSAoZXZlbnQpID0+IHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgY3JlYXRlVG9kbygpO1xuICBjbGVhckZvcm0oVE9ET19JTlBVVF9FTEVNRU5UX0lEKTtcbiAgcmVuZGVyVG9kb3MoKTtcbn07XG5cbmNvbnN0IHRvZG9MaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoVE9ET19MSVNUX0VMRU1FTlRfSUQpIGFzIEhUTUxVTGlzdEVsZW1lbnQ7XG50b2RvTGlzdC5vbmRyYWdvdmVyID0gKGV2ZW50KSA9PiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xudG9kb0xpc3Qub25kcmFnZW50ZXIgPSAoZXZlbnQpID0+IGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG50b2RvTGlzdC5vbmRyb3AgPSAoZXZlbnQpID0+IHtcbiAgY29uc3QgdG9kb1BsYWluVGV4dCA9IGV2ZW50LmRhdGFUcmFuc2Zlcj8uZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICBpZiAoIXRvZG9QbGFpblRleHQpIHJldHVybjtcbiAgY29uc3QgdG9kbyA9IEpTT04ucGFyc2UodG9kb1BsYWluVGV4dCkgYXMgVG9kbztcbiAgaWYgKHRvZG8uY29tcGxldGVkKSB7XG4gICAgYmFja1RvZG8odG9kby5pZCk7XG4gICAgcmVuZGVyVG9kb3MoKTtcbiAgfVxufTtcblxuY29uc3QgdG9kb0NvbXBsZXRlTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFRPRE9fQ09NUExFVEVfTElTVF9FTEVNRU5UX0lEKSBhcyBIVE1MVUxpc3RFbGVtZW50O1xudG9kb0NvbXBsZXRlTGlzdC5vbmRyYWdvdmVyID0gKGV2ZW50KSA9PiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xudG9kb0NvbXBsZXRlTGlzdC5vbmRyYWdlbnRlciA9IChldmVudCkgPT4gZXZlbnQucHJldmVudERlZmF1bHQoKTtcbnRvZG9Db21wbGV0ZUxpc3Qub25kcm9wID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHRvZG9QbGFpblRleHQgPSBldmVudC5kYXRhVHJhbnNmZXI/LmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgaWYgKCF0b2RvUGxhaW5UZXh0KSByZXR1cm47XG4gIGNvbnN0IHRvZG8gPSBKU09OLnBhcnNlKHRvZG9QbGFpblRleHQpIGFzIFRvZG87XG4gIGlmICghdG9kby5jb21wbGV0ZWQpIHtcbiAgICBjb21wbGV0ZVRvZG8odG9kby5pZCk7XG4gICAgcmVuZGVyVG9kb3MoKTtcbiAgfVxufTtcbi8qIOODoeOCpOODs+WHpueQhue1guOCj+OCiiAqL1xuIiwiZXhwb3J0IGNvbnN0IGNsZWFyRm9ybSA9IChlbGVtZW50SWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCB0b2RvSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICB0b2RvSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XG59O1xuIl0sIm5hbWVzIjpbIlRPRE9fSU5QVVRfRUxFTUVOVF9JRCIsIlRPRE9fTElTVF9FTEVNRU5UX0lEIiwiVE9ET19DT01QTEVURV9MSVNUX0VMRU1FTlRfSUQiLCJnZXRUb2RvcyIsInRvZG9zIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsImdldFRvZG9JbmRleCIsImlkIiwiaSIsImxlbmd0aCIsImNvbXBsZXRlVG9kbyIsInRvZG9JZCIsIm5ld1RvZG9zIiwiY29tcGxldGVkIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInJlbmRlclRvZG9zIiwiYmFja1RvZG8iLCJjcmVhdGVUb2RvRGVsZXRlQnV0dG9uRWxlbWVudCIsInRvZG9EZWxldGVCdXR0b25FbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJvbmNsaWNrIiwiZmlsdGVyIiwidG9kbyIsImRlbGV0ZVRvZG8iLCJwYXJzZUludCIsInRvZG9MaXN0RWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwidG9kb0NvbXBsZXRlTGlzdEVsZW1lbnQiLCJmb3JFYWNoIiwidG9kb0VsZW1lbnQiLCJjbGFzc05hbWUiLCJkcmFnZ2FibGUiLCJvbmRyYWdzdGFydCIsImV2ZW50IiwiY29udGVudCIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJjcmVhdGVUb2RvRWxlbWVudCIsInRvZG9Db250ZW50RWxlbWVudCIsInRvZG9Db250ZW50IiwiY3JlYXRlVG9kb0NvbnRlbnRFbGVtZW50IiwidG9kb0NvbXBsZXRlQnV0dG9uRWxlbWVudCIsInR5cGUiLCJjcmVhdGVUb2RvQ29tcGxldGVCdXR0b25FbGVtZW50IiwiU3RyaW5nIiwiYXBwZW5kQ2hpbGQiLCJ0b2RvQmFja0J1dHRvbkVsZW1lbnQiLCJjaGVja2VkIiwiY3JlYXRlVG9kb0JhY2tCdXR0b25FbGVtZW50Iiwid2luZG93Iiwib25sb2FkIiwib25zdWJtaXQiLCJlbGVtZW50SWQiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwibmV3VG9kbyIsIkRhdGUiLCJub3ciLCJwdXNoIiwiY3JlYXRlVG9kbyIsInRvZG9MaXN0Iiwib25kcmFnb3ZlciIsIm9uZHJhZ2VudGVyIiwib25kcm9wIiwidG9kb1BsYWluVGV4dCIsImdldERhdGEiLCJ0b2RvQ29tcGxldGVMaXN0Il0sInNvdXJjZVJvb3QiOiIifQ==